<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/sobre.css">
    <title>SCCP | Time</title>
</head>
<body>
    <div class="containerTorcedor">
            <div class="geralPerguntas">
                <div class="containerPerguntas">
                    <div class="perguntas">
                        <img src="./assets/logotipo-corinthians.png">
                        <ul> 1 - Qual Time Você Torce: </ul>
                        <select id="Time">
                            <option value="corinthians">
                                Corinthians
                            </option>
                            <option value="santos">
                                Santos
                            </option>
                            <option value="sao_paulo">
                                São Paulo
                            </option>
                            <option value="palmeiras">
                                Palmeiras
                            </option>
                            <option value="outro">
                                Outro
                            </option>
                            <option value="nenhum">
                                Nenhum
                            </option>
                        </select>
                        <ul>2 - Qual Tipo de Torcedor Você é: </ul>
                        <select id="Torcedor">
                            <option value="louco">
                                Louco
                            </option>
                            <option value="fanatico">
                                Fanatico
                            </option>
                            <option value="comum">
                                Comum
                            </option>
                            <option value="nenhum">
                                Nenhum
                            </option>
                        </select>
                        <div class="home">
                            <a href="index.html">Home</a>
                            <div class="botaoSobre">
                                <button onclick="cadastrar_info()">Continuar</button>
                              </div>
                        </div>
                    </div>
                    </div>
            </div>
    </div>
</body>
</html>

<script>
    function cadastrar_info() {
    //  aguardar();
 
     //Recupere o valor da nova input pelo nome do id
     // Agora vá para o método fetch logo abaixo
     var nomeVar = localStorage.getItem('nome');
     var sobrenomeVar = localStorage.getItem('sobrenome');
     var emailVar = localStorage.getItem('email');
     var senhaVar = localStorage.getItem('senha');
     var timeVar = Time.value;
     var torcedorVar = Torcedor.value;
 
     if (nomeVar == "" || sobrenomeVar == "" || emailVar == "" || senhaVar == "" || timeVar == "" || torcedorVar == "") {
         cardErro.style.display = "block"
         mensagem_erro.innerHTML = "(Mensagem de erro para todos os campos em branco)";
 
        //  finalizarAguardar();
         return false;
     }
     else {
     }
 
     // Enviando o valor da nova input
     fetch("/usuarios/cadastrar", {
         method: "POST",
         headers: {
             "Content-Type": "application/json"
         },
         body: JSON.stringify({
             // crie um atributo que recebe o valor recuperado aqui
             // Agora vá para o arquivo routes/usuario.js
             nomeServer: nomeVar,
             sobrenomeServer: sobrenomeVar,
             emailServer: emailVar,
             senhaServer: senhaVar,
             timeServer: timeVar,
             torcedorServer: torcedorVar
         })
     }).then(function (resposta) {
 
         console.log("resposta: ", resposta);
 
         if (resposta.ok) {
 
             setTimeout(() => {
                 window.location = "login.html";
             }, "2000")
             
            //  limparFormulario();
            //  finalizarAguardar();
         } else {
             throw ("Houve um erro ao tentar realizar o cadastro!");
         }
     }).catch(function (resposta) {
         console.log(`#ERRO: ${resposta}`);
        //  finalizarAguardar();
     });
 
     return false;
 }
 </script>